{"remainingRequest":"/home/student/Desktop/test/client/node_modules/babel-loader/lib/index.js!/home/student/Desktop/test/client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/student/Desktop/test/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/student/Desktop/test/client/src/components/CreateBook.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/student/Desktop/test/client/src/components/CreateBook.vue","mtime":1651157576640},{"path":"/home/student/Desktop/test/client/babel.config.js","mtime":1651157576480},{"path":"/home/student/Desktop/test/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/student/Desktop/test/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/student/Desktop/test/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/student/Desktop/test/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0dWRlbnQvRGVza3RvcC90ZXN0L2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL3N0dWRlbnQvRGVza3RvcC90ZXN0L2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCBpbnN0YW5jZSBmcm9tICJAL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ3JlYXRlQm9vayIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJvb2s6IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgcGFnZXM6ICcnLAogICAgICAgIHRleHQ6ICcnLAogICAgICAgIHllYXI6ICcnLAogICAgICAgIGF1dGhvcjogJycsCiAgICAgICAgZmlsZTogbnVsbCwKICAgICAgICBoYXZlOiB0cnVlCiAgICAgIH0sCiAgICAgIHNob3dJbWFnZTogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoWydTRVRfTE9BREVSJ10pKSwgbWFwQWN0aW9ucyhbJ2NyZWF0ZUJvb2snXSkpLCB7fSwgewogICAgb25GaWxlQ2hhbmdlOiBmdW5jdGlvbiBvbkZpbGVDaGFuZ2UoZSkgewogICAgICB2YXIgZmlsZXMgPSBlLnRhcmdldC5maWxlcyB8fCBlLmRhdGFUcmFuc2Zlci5maWxlczsKCiAgICAgIGlmICghZmlsZXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmJvb2suZmlsZSA9IGZpbGVzWzBdOwogICAgICB0aGlzLmNyZWF0ZUltYWdlKGZpbGVzWzBdLCB0aGlzLmJvb2spOwogICAgfSwKICAgIGNyZWF0ZUltYWdlOiBmdW5jdGlvbiBjcmVhdGVJbWFnZShmaWxlLCBib29rKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZWFkZXIsIGZvcm1EYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dJbWFnZSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RpdGxlJywgX3RoaXMuYm9vay50aXRsZSk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3llYXInLCBfdGhpcy5ib29rLnllYXIpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhdXRob3InLCBfdGhpcy5ib29rLmF1dGhvcik7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3BhZ2VzJywgX3RoaXMuYm9vay5wYWdlcyk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RleHQnLCBfdGhpcy5ib29rLnRleHQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLnBvc3QoJy9ib29rJywgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEwLCAxNV1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVtb3ZlSW1hZ2U6IGZ1bmN0aW9uIHJlbW92ZUltYWdlKGUpIHsKICAgICAgdGhpcy5zaG93SW1hZ2UgPSBudWxsOwogICAgICB0aGlzLmJvb2suZmlsZSA9IG51bGw7CiAgICB9LAogICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoYm9vaykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBpZih0aGlzLiR2LiRpbnZhbGlkKSB7CiAgICAgICAgICAgICAgICAvLyAgIHRoaXMuJHYudG91Y2goKQogICAgICAgICAgICAgICAgLy8gICByZXR1cm4KICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJvb2spOwoKICAgICAgICAgICAgICAgIF90aGlzMi5TRVRfTE9BREVSKHRydWUpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY3JlYXRlQm9vayhib29rKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSkKfTs="},{"version":3,"mappings":"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","names":["axios","mapActions","mapMutations","instance","name","data","book","title","pages","text","year","author","file","have","showImage","methods","onFileChange","e","files","target","dataTransfer","length","createImage","reader","FileReader","onload","result","readAsDataURL","formData","FormData","append","post","then","res","console","log","removeImage","create","SET_LOADER","createBook"],"sourceRoot":"","sources":["/home/student/Desktop/test/client/src/components/CreateBook.vue"],"sourcesContent":["<template>\n  <form class=\"create__book\" @submit.prevent=\"\" enctype=\"multipart/form-data\">\n    <h4 class=\"create__title\">Create Book</h4>\n    <div class=\"inputs__wrapper\">\n      <div class=\"input__wrapper\">\n       <input\n           class=\"form-control\"\n           type=\"text\"\n           v-model.trim=\"book.title\"\n           placeholder=\"Book title\"\n       >\n      </div>\n      <div class=\"input__wrapper\">\n       <input type=\"number\" v-model.trim=\"book.year\" class=\"form-control\" placeholder=\"Book year\">\n      </div>\n    </div>\n       <div class=\"inputs__wrapper\">\n         <div class=\"input__wrapper\">\n           <input type=\"text\" v-model.trim=\"book.author\" class=\"form-control\" placeholder=\"Book author\">\n         </div>\n         <div class=\"input__wrapper\">\n           <input type=\"number\" v-model.trim=\"book.pages\" class=\"form-control\" placeholder=\"Book pages\">\n         </div>\n       </div>\n       <div class=\"input__wrapper\">\n         <div v-if=\"!showImage\">\n           <input type=\"file\" class=\"form-control\" ref=\"file\" @change=\"onFileChange\">\n         </div>\n         <div class=\"img__wrapper\" v-else>\n           <img class=\"img\" :src=\"showImage\" />\n           <button class=\"button danger\" @click=\"removeImage\">remove</button>\n         </div>\n       </div>\n       <div class=\"input__wrapper\">\n         <textarea class=\"form-control\" v-model=\"book.text\" placeholder=\"Book description\" rows=\"3\"></textarea>\n       </div>\n       <div class=\"input__wrapper\">\n         <input class=\"checkbox\" v-model=\"book.have\" type=\"checkbox\" id=\"have\" checked>\n         <label class=\"form-label\" for=\"have\">Have a book</label>\n       </div>\n    <button class=\"button\" type=\"submit\" @click=\"create(this.book)\">Create</button>\n  </form>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport {mapActions, mapMutations} from \"vuex\";\nimport instance from \"@/api\";\n\nexport default {\n  name: \"CreateBook\",\n  data() {\n    return {\n      book: {\n        title: '',\n        pages: '',\n        text: '',\n        year: '',\n        author: '',\n        file: null,\n        have: true\n      },\n      showImage: null,\n    }\n  },\n  methods: {\n    ...mapMutations(['SET_LOADER']),\n    ...mapActions(['createBook']),\n    onFileChange(e) {\n      let files = e.target.files || e.dataTransfer.files;\n      if (!files.length) {\n        return;\n      }\n      this.book.file = files[0];\n      this.createImage(files[0], this.book);\n    },\n    async createImage(file, book) {\n      let reader = new FileReader();\n      reader.onload = (e) => {\n        this.showImage = e.target.result;\n      };\n      reader.readAsDataURL(file);\n\n      let formData = new FormData();\n      formData.append('file', file);\n      formData.append('title', this.book.title);\n      formData.append('year', this.book.year);\n      formData.append('author', this.book.author);\n      formData.append('pages', this.book.pages);\n      formData.append('text', this.book.text);\n\n      try {\n        await instance.post('/book', formData).then((res) => {\n          console.log(res.data);\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    removeImage: function (e) {\n      this.showImage = null;\n      this.book.file = null;\n    },\n    async create(book) {\n      // if(this.$v.$invalid) {\n      //   this.$v.touch()\n      //   return\n      // }\n      console.log(book);\n      this.SET_LOADER(true)\n      await this.createBook(book)\n    },\n  }\n}\n</script>\n\n<style scoped>\n.create__book {\n  display: flex;\n  flex-direction: column;\n  margin: 1rem 0;\n  margin-top: 2.6rem;\n  width: 60%;\n  border-radius: 3px;\n  border: 2px solid #27ae60;\n  padding: 1rem;\n}\n\n@media (max-width: 1024px) {\n  .create__book {\n    width: 100%;\n  }\n}\n\n.create__title {\n  margin-bottom: .1rem;\n}\n\n.inputs__wrapper {\n  width: 100%;\n  display: flex;\n}\n\n.input__wrapper {\n  display: flex;\n  align-items: center;\n  margin: .2rem 0;\n  width: 100%;\n  margin: .1rem;\n}\n\ninput,textarea {\n  font-size: 13px;\n}\n\n.form-label {\n  font-size: 13px;\n  margin: 0;\n  user-select: none;\n  margin-left: .2rem;\n}\n\n.img__wrapper {\n  width: 100%;\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n}\n\n.img {\n  max-width: 7rem;\n  height: auto;\n}\n\n.checkbox {\n  width: 1rem;\n  height: 1rem;\n  cursor: pointer;\n}\n\n.button {\n  margin-top: .2rem;\n}\n</style>"]}]}